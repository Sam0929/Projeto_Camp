{% extends "base.html" %}

{% block title %}Chave de Confrontos{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="text-center">
        <h1 class="display-4">Chave de Confrontos</h1>
        <p class="lead">Confira os jogos das fases eliminatórias do campeonato!</p>
        <hr class="my-4">
        <p>Campeonato: {{ campeonato.nome }}</p>
        <p>Data de início: {{ campeonato.data_inicio|date:"d/m/Y" }}</p>
        <p>Data de fim: {{ campeonato.data_fim|date:"d/m/Y" }}</p>
    </div>

    <!-- Exibição dos confrontos por fase -->
    <div class="mt-4">
        {% for fase, jogos in jogos_por_rodada.items %}
            <h3 class="mt-4 text-center text-primary">{{ fase|title }}</h3>
            <ul class="list-group mb-3">
                {% for jogo in jogos %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            {% if jogo.time_casa %}
                                <strong>{{ jogo.time_casa.equipe }}</strong>
                            {% else %}
                                <span class="text-primary">À definir</span>
                            {% endif %}
                            vs
                            {% if jogo.time_fora %}
                                <strong>{{ jogo.time_fora.equipe }}</strong>
                            {% else %}
                                <span class="text-primary">À definir</span>
                            {% endif %}
                            <small class="text-muted">
                                ({{ jogo.rodada.data|date:"d/m/Y" }} {{ jogo.rodada.data|time:"H:i" }})
                            </small>
                        </div>
                        <div>
                            {% if jogo.resultado_eliminatorio %}
                                <span class="badge bg-success rounded-pill">
                                    Resultado: {{ jogo.resultado_eliminatorio.gols_time_casa }} - {{ jogo.resultado_eliminatorio.gols_time_fora }}
                                </span>
                            {% else %}
                                <span class="badge bg-secondary rounded-pill">Resultado: Pendente</span>
                            {% endif %}
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% endfor %}
    </div>

    <div class="mt-4 text-center">
        <!-- Botão para registrar resultados das eliminatórias -->
        <a href="{% url 'registrar_resultados_eliminatorias' campeonato_id=campeonato.id %}" class="btn btn-warning w-100 mt-2">Registrar Resultados Eliminatórias</a>
    </div>
</div>
{% endblock %}
